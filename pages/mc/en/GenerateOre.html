<!DOCTYPE html>
<html>
  
  
  <body>
  
    <main class="main">
      <article class="post">

	<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Generate Ore</title>

    <!-- Bootstrap core CSS -->
    <link href="https://bluerabbitteam.tk/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://bluerabbitteam.tk/css/my-bootstrap-nav.css" rel="stylesheet">
	<!--自制左侧菜单栏源文件引入-->
	<link rel="stylesheet" type="text/css" href="https://bluerabbitteam.tk/css/nav.css">
	<link rel="stylesheet" type="text/css" href="https://bluerabbitteam.tk/fonts/iconfont.css">
	<script type="text/javascript" src="https://bluerabbitteam.tk/js/jquery.min.js"></script>
	<script type="text/javascript" src="https://bluerabbitteam.tk/js/nav.js"></script>

    <!-- Custom styles for this template -->
    <link href="https://bluerabbitteam.tk/css/starter-template.css" rel="stylesheet">
	<!--
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    -->
	
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <meta name="generator" content="Hexo 4.2.0"></head>
  </html>
	
  <body>
  <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
		  <!--
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
		  -->
          <div class="navbar-brand" id="normal"><span class="pos"><img src="images/mini.png"></span></div>>
		  
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="/">Home</a></li>
            <li><a href="#about">Catalog</a></li>
            <li><a href="#contact">Other</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div><!--navbar-->

	<div class="hole-div">   <!--除导航栏外，把整个内容包裹在里面-->
	<div class="my-nav">

	  <ul>
		<li class="nav-item">
		  <a href="#"><span class="my-icon icon_1"></span><span class="tile-text">网站配置</span><i class="my-icon nav-more"></i></a>
		  <ul>
			<li><a href="#"><span>网站设置</span></a></li>
			<li><a href="#"><span>友情链接</span></a></li>
			<li><a href="#"><span>分类管理</span></a></li>
			<li><a href="#"><span>系统日志</span></a></li>
		  </ul>
		</li>
		<li class="nav-item">
		  <a href="#"><span class="my-icon icon_2"></span><span class="tile-text">文章</span><i class="my-icon nav-more"></i></a>
		  <ul>
			<li><a href="#"><span>站内新闻</span></a></li>
			<li><a href="#"><span>站内公告</span></a></li>
			<li><a href="#"><span>登录日志</span></a></li>
		  </ul>
		</li>
		<!--
		<li class="nav-item">
		  <a href="#"><span class="my-icon icon_3"></span><span class="tile-text">订单管理</span><i class="my-icon nav-more"></i></a>
		  <ul>
			<li><a href="#"><span>订单列表</span></a></li>
			<li><a href="#"><span>打个酱油</span></a></li>
			<li><a href="#"><span>也打酱油</span></a></li>
		  </ul>
		</li>
		-->
	  </ul>
	</div>
	
	<div class="free-area">, <!--点击此区域可收起菜单栏-->
    <div class="container">

      <div class="blog-header">
			<h1 class="blog-title">Generate Ore</h1>
			<!--
			<p class="lead blog-description">The official example template of creating a blog with Bootstrap.</p>
			-->
			<span class="post-time">2020-04-13</span>
      </div>

      <div class="row">

        <div class="col-sm-11 blog-main">

            <div class="post-content">
				<h3 id="Minecraft-1-12-modding-with-forge-–-7-–-custom-ore-generation"><a href="#Minecraft-1-12-modding-with-forge-–-7-–-custom-ore-generation" class="headerlink" title="Minecraft 1.12 modding with forge – 7 – custom ore generation"></a>Minecraft 1.12 modding with forge – 7 – custom ore generation</h3><p>Hello everyone, in this part we will make our custom ore generate in the overworld. I will also show how you could make a block generate in other dimensions and in other blocks then stone.</p>
<hr>
<p>To keep the code organized create a new package called <em>gen</em>  (or <em>worldgen</em>, or something like that). In this package I will create a class called <em>OreGen</em>. By instantiating this class we will be able to register custom ore generating. Make this class implement <em>IWorldGenerator</em>. Eclipse will automatically complain because we haven’t implemented the <em>generate_method. Just hover over the error and click _“add unimplemented methods__“.</em> If that for some reason doesn’t work or you can’t do that for some reason, add a <em>public</em> method called <em>generate</em>. It doesn’t return anything:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void generate(Random random, int chunkX, int chunkZ, World world, IChunkGenerator chunkGenerator,public void generate(Random random, int chunkX, int chunkZ, World world, IChunkGenerator chunkGenerator, IChunkProvider chunkProvider) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>Now we just need 1 more method: It is private, returns nothing and I will call it <em>runGenerator</em>. This method will choose the position based on the pseudo-random number generator (based on the world seed) and pass the position to the <em>oreGenerator</em>, this will automatically generate an ore vein at the position.<br>This method takes in several variables:</p>
<ol>
<li>The block to generate. (<em>IBlockState</em>)</li>
<li>The amount of blocks to generate. (<em>int</em>)</li>
<li>The spawnChance. (<em>int</em>)</li>
<li>The minimumHeight. (<em>int</em>)</li>
<li>The maximumHeight. (<em>int</em>)</li>
<li>The block to replace. (<em>Predicate<IBlockState></em>)</li>
<li>The world that is being generated. (<em>World</em>)</li>
<li>The random object. (<em>Random</em>)</li>
<li>The chunk’s x position. (<em>int</em>)</li>
<li>The chunk’s z position. (<em>int</em>)</li>
</ol>
<hr>
<p>Now we have all of our methods setup and we can start making them do something.</p>
<p><sub><a href="https://gist.github.com/suppergerrie2/d145defc42ee10f463e623b6c1bf16d7#file-oregen-java" target="_blank" rel="noopener">OreGen.java</a></sub></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OreGen</span> <span class="keyword">implements</span> <span class="title">IWorldGenerator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">generate</span><span class="params">(Random random, <span class="keyword">int</span> chunkX, <span class="keyword">int</span> chunkZ, World world, IChunkGenerator chunkGenerator,</span></span></span><br><span class="line"><span class="function"><span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">			IChunkProvider chunkProvider)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">runGenerator</span><span class="params">(IBlockState blockToGen, <span class="keyword">int</span> blockAmount,  <span class="keyword">int</span> chancesToSpawn, <span class="keyword">int</span> minHeight, <span class="keyword">int</span> maxHeight, Predicate&lt;IBlockState&gt; blockToReplace, World world, Random rand, <span class="keyword">int</span> chunk_X, <span class="keyword">int</span> chunk_Z)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The generate method will do 1 thing: it will call the <em>runGenerator</em> method with different arguments depending on the dimension. To choose in which dimension we want our ores to generate we are gonna implement a switch statement for every vanilla dimension. Dimensions are represented by integers:</p>
<ul>
<li>Nether: -1 (Ores mostly replace <em>Netherrack</em>)</li>
<li>Overworld: 0 (Ores mostly replace <em>Stone</em>)</li>
<li>The End: 1 (No ores normally spawn but you should probably replace <em>Endstone</em>)</li>
</ul>
<p><sub><a href="https://gist.github.com/suppergerrie2/1769084706f2f4434b366331622169e8#file-oregen-java" target="_blank" rel="noopener">OreGen.java</a></sub></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(world.provider.getDimension()) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Nether</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> -<span class="number">1</span>:</span><br><span class="line"></span><br><span class="line">  <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Overworld</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line"></span><br><span class="line">  <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//End</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"></span><br><span class="line">  <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Everything else</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"></span><br><span class="line">  <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>When the generator is run it will try to generate your  <em>block</em>  between <em>minHeight</em>  and <em>maxHeight</em>. For every chunk it will try <em>spawnChance</em>  times to generate your block, and it will replace the block you said.</p>
<p>Inside of the <em>case</em>  with the dimension id you want to generate in you need to call <em>runGenerator</em>  with the variables you want. For example this could be a line:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runGenerator(ModBlocks.tutorialOre.getDefaultState(), 7, 10, 12, 50, BlockMatcher.forBlock(Blocks.STONE), world, random, chunkX, chunkZ);</span><br></pre></td></tr></table></figure>

<p>This will generate the <em>tutorialOre</em>  with a max size of 7 and a spawnChance of 10. Between y12 and y50. This line was made for the overworld and thus will replace stone. The other variables are the inputs of the <em>runGenerator</em> method. I’ll also make it generate brick blocks in the end (Because why not!)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runGenerator(Blocks.BRICK_BLOCK.getDefaultState(), 7, 10, 0, 255, BlockMatcher.forBlock(Blocks.END_STONE), world, random, chunkX, chunkZ);</span><br></pre></td></tr></table></figure>

<p>Now the <em>runGenerator</em>  method, the first thing you should do is check if <em>minHeight</em>  isn’t smaller then 0, <em>maxHeight_isn’t bigger then 256 and _minHeight</em>  isn’t bigger then <em>maxHeight</em>. If one of those things is wrong you can throw an <em>IllegalArgumentException</em>. We can then calculate the difference between <em>min-</em> and <em>maxHeight</em>. This will be used to generate a random <em>int_between _min_– and _maxHeight</em>. Then create a loop from 0 to <em>spawnChance</em>. In every iteration we will generate a random x, y and z position. Then with those values call <em>generate</em>  on the generator and pass it the world, random object and BlockPosition. We also need to create a <em>WorldGenMinable</em>  variable, we need to pass the block we are gonna generate, the amount of blocks we are gonna generate and the blocks we need to replace.</p>
<p><sub><a href="https://gist.github.com/suppergerrie2/21772caa245e07832d77b1bc0f99ca78#file-oregen-java" target="_blank" rel="noopener">OreGen.java</a></sub></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">runGenerator</span><span class="params">(IBlockState blockToGen, <span class="keyword">int</span> blockAmount,  <span class="keyword">int</span> chancesToSpawn, <span class="keyword">int</span> minHeight, <span class="keyword">int</span> maxHeight, Predicate&lt;IBlockState&gt; blockToReplace, World world, Random rand, <span class="keyword">int</span> chunk_X, <span class="keyword">int</span> chunk_Z)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (minHeight &lt; <span class="number">0</span> || maxHeight &gt; <span class="number">256</span> || minHeight &gt; maxHeight)</span><br><span class="line"></span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal Height Arguments for WorldGenerator"</span>);</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">	WorldGenMinable generator = <span class="keyword">new</span> WorldGenMinable(blockToGen, blockAmount, blockToReplace);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> heightdiff = maxHeight - minHeight +<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;chancesToSpawn; i++)&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> x = chunk_X * <span class="number">16</span> +rand.nextInt(<span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> y = minHeight + rand.nextInt(heightdiff);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> z = chunk_Z * <span class="number">16</span> + rand.nextInt(<span class="number">16</span>);</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">		generator.generate(world, rand, <span class="keyword">new</span> BlockPos(x, y, z));</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Now we just have to register our <em>OreGen</em>. In your <em><strong>main</strong></em>  mod class’ init method register the generator by calling <em>GameRegistry.registerWorldGenerator</em>, this method needs 2 variables, our generator and a weight. For the generator instatiate our <em>OreGen</em>. The weight is used to determine when the generator is ran. The higher the later (and thus less chance your blocks will be removed). I will just used 0.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GameRegistry.registerWorldGenerator(new OreGen(), 0);</span><br></pre></td></tr></table></figure>

<p>You have to make sure you don’t make the size way to big, this could lead to <em>cascading</em>  worldgeneration. This means that extra chunks keep getting generated by eachothers to generate your ore. M_ezz_  posted an amazing explanation on  <a href="https://www.reddit.com/r/feedthebeast/comments/5x0twz/investigating_extreme_worldgen_lag/" target="_blank" rel="noopener">reddit</a>.</p>
<p><a href="http://suppergerrie2.com/wp-content/uploads/2017/08/2017-08-09_14.19.36.png" target="_blank" rel="noopener"><img src="http://suppergerrie2.com/wp-content/uploads/2017/08/2017-08-09_14.19.36.png" alt=""></a><a href="http://suppergerrie2.com/wp-content/uploads/2017/08/2017-08-09_14.27.25.png" target="_blank" rel="noopener"><img src="http://suppergerrie2.com/wp-content/uploads/2017/08/2017-08-09_14.27.25.png" alt=""></a></p>
<p>I hope this was useful and as always if you have any question don’t hesitate to ask in the comments! Also if you saw any errors in the tutorial please let me know so I can fix it!</p>

			</div>
			
			</div>

      </div><!-- /.row -->

    </div><!-- /.container -->
	</div>
	
	<br>
	<br>
	<br>
	<br>
	<br>
 </body>
</article>
    </main>
	</div>
	
	<div class="free-area">
	<div class="blog-footer">
		<p>by <a href="">蓝兔</a> <br><a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=670c18a63bf9c3f607fbee1b7f0c3f00f9d12dc84bcd05692db77bd5796a7616">点击进入口袋妖怪交流群</a><br>暂无Minecraft交流群</p>
	</div>
	</div>
	<!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://bluerabbitteam.tk/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="https://bluerabbitteam.tk/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
